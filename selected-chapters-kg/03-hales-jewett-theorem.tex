\chapter{Hales-Jewett theorem}

We will now jump to another topic and mainly the Hales-Jewett theorem. This was actually motivated by famous Van der Waerden theorem \ref{van-der-waerden}.

\begin{thm}
	For every $n > 0$ and every finite coloring of integers there exists monochromatic arithmetic progression of length $n$, i.e. $a, a + b, a + 2b, \dots, a + (n-1)b$ for $b > 0$.
	\label{van-der-waerden}
\end{thm}

But the main issue is that this theorem is rather more algebraic and also used in combinatorics. For example we could create an auxiliary hypergraph $H = (\N, \text{all pregressions of length }n)$ so that we are looking at edges.

\begin{topic}{Multidimensional Tic-Tac-Toe}
	Lets consider $\Sigma$ finite alphabet (set). Then $\Sigma^n$ is set of functions $[n] \to \Sigma$ (usually called words). Lets define a hypergraph by the following set. $L \subseteq \Sigma^n$ is combinatorial line if $M \subseteq \{1, 2, \dots, n\}$ nonempty and $f: [n] \to \Sigma$ such that
	
	$$
	L = \left\{g | \exists c \in \Sigma \ g(i) = \left\{
	\begin{array}{ll}
		c & \text{if } i \in M \\
		f(i) & \text{if } i \notin M
	\end{array}
	\right.\right\}.
	$$
	
	\begin{example}
		Lets have $w = (\{\lambda\} \cup \Sigma)^n$ then lets have $A\lambda\lambda B$ which can either be $AAAB$ or $ABBB$. So formally $M = \{2,3\}$ and $f = AAAB$.
	\end{example}

	\begin{figure}[!ht]\centering
		\begin{tikzpicture}[n/.style = {draw, circle, fill, inner sep=1.5pt},
			l/.style = {line width=2.5pt},
			o/.style = {myorange},
			g/.style = {mygreen},
			b/.style = {myblue}]
			\foreach \j in {1,...,3} {
				\foreach \i in {1,...,3} {
					\node[n] (\j-\i) at (2*\j,2*\i) {};
				}
			}
			\foreach \j in {1,...,3}{
				\node (l1-\j) at (1.5, 8 - 2*\j) {\j};
			}
			\foreach \j in {1,...,3}{
				\node (l2-\j) at (2*\j, 6.5) {\j};
			}
			\foreach \j in {1,...,3}{
				\draw[o,l] (\j-1) to (\j-2) to (\j-3);
				\node[o] at (2*\j, 1.5) {$\lambda$\j};
				\draw[g,l] (1-\j) to (2-\j) to (3-\j);
				\node[g] at (6.5, 2*\j) {\j$\lambda$};
			}
			\draw[b,l] (1-3) to (2-2) to (3-1);
			\node[b] at (6.5,1.5) {$\lambda\lambda$};	
		\end{tikzpicture}
		\caption{Combinatorial representation of combinatorial lines for $\Sigma = \{1,2,3\}$ and $n =2$. Which we can see we obtain a hypergraph $H = (\Sigma^n, \text{Lines})$.}
		\label{comb}
	\end{figure}
\end{topic}

\begin{thm}{Hales-Jewett, 1964}
	For every finite $\Sigma$ and finite $n > 0$ $\exists N > 0$ denoted as $\HJ (|\Sigma|, r)$ such that the chromatic number of $H(\Sigma^n, \text{Lines})$ is at least $n$, or alternatively if $\Sigma^n$ is $r$-colored then there exist monochromatic combinatorial line (which is a subspace of dimension 1).
\end{thm}

\begin{thm}{Van der Warden, 1927}
	For $r$ number of colors and $l$ length of progression is known then there is finite version $N = \VW(r,k)$. And $N$ is not primitive recursion.
\end{thm}

Actually in the terms of Van der Warden theorem Shelah showed that $\VW$ has upper bound via a primitive recursion which is of a kind

$$
2^{2^{r^{2^{2^{k+q}}}}}.
$$

\newpage

\begin{topic}{Proof of Hales Jewett theorem}
	\begin{defn}
		Parameter spaces are for $\Sigma$ finite alphabet and its $n$-dimensional parameter $\Sigma^n$ of functions $[r] \to \Sigma$ space.
	\end{defn}

	So the $d$-dimensional subspace is a subset of $\Sigma^n$ described by a word in $\Sigma \cup \{\lambda_1, \lambda_2, \dots, \lambda_d\}$ where every $\lambda_i$ appears at least once and is a set $S = \{w(u) | u \in \Sigma^d\}$.
	
	\begin{example}
		$\Sigma = \{a,b\}$ let $W = a \lambda_1 \lambda_2 b \lambda_1$, which by $(aa)$ is replaced to $aaaba$.
	\end{example}

	Now we will proceed with improvement of the Hales Jewett theorem.
	
	\begin{thm}{Hales Jewett improved}
		$\forall$ finite $\Sigma$ $\forall r > 0, d > 0$ there exists $N = \HJ(|\Sigma, r, d)$ such that if $\Sigma^N$ is $r$-colored then there exist monochromatic $d$-dimensional subspace.
		\label{hj-imrpov}
	\end{thm}

	\begin{observ}
		$\forall s, d: \ \HJ (s, 1, d) = d$ and also $\forall r, d: \ \HJ(1, r, d) = d$. Lets see that $\HJ(2,2,1) = 2$, or generally that $\HJ(2,r,1) = r$ which can be viewed by pigeonhole principle, so that there is $k$ zeroes followed by $r - k$ ones, then every pair makes a line. In $\Sigma^r$ are $r + 1$ step functions.
	\end{observ}

	\begin{lemma}
		$\forall r > 0 \ \HJ(s,r,1) \Rightarrow \forall r, d > 0 \ \HJ(s,r,d)$
		\label{hj-lemma-1}
	\end{lemma}

	\begin{lemma}
		$\forall r, d > 0 \ \HJ(s,r,d) \Rightarrow \forall r > 0 \ \HJ(s+1, r, 1)$
		\label{hj-lemma-2}
	\end{lemma}

	\begin{proof}[Proof of theorem \ref{hj-imrpov}]
		Simply put both lemmas \ref{hj-lemma-1} and \ref{hj-lemma-2} together and we are able to recreate $\HJ$ for all $s, r, d$.
	\end{proof}

	\begin{proof}[Proof of lemma \ref{hj-lemma-1}]
		We will show that if $\forall r, d > 0 \ \HJ(s,r,1)$ is finite then $\forall r > 0 \ \HJ(s+, r, 2)$ is finite. Fix $s, r$ and assume $\HJ(s, r', 1)$ is finite. Put $n_1 = \HJ(s,r,1)$ and $n_2 = \HJ(s, r^{s^{n-1}}, 1)$ and then $\HJ(s,r,2) \leq n_2 + n_1$. We may see this as that we have $n_2$ initial segment and $n_1$ suffix.
		
		Let $\Sigma^{n_1 + n_2}$ be $r$-colored, then define $r \cdot s^{n_1}$ coloring of $\Sigma^{n_2}$. By the choice od $n_2$ then $\Sigma^{n_2}$ contains a monochromatic line. $\chi : \Sigma^{n_2 + n_1} \to r$ and $\chi'$ is a function from $\Sigma^{n_2}$ to the set of all functions $\Sigma^{n_1} \to r$.
		
		Color of this line is a $r$-coloring of $\Sigma^{n_1}$. By the choice of $n_1$ it contains a monochromatic line. For higher $d$ replace $n_1 = \HJ(s, r^{s^{n_1}}, d)$.
	\end{proof}

	\begin{proof}[Proof of lemma \ref{hj-lemma-2}]
		Define $S_a$ as a set of specials words. Suppose we know it for $\Sigma$ and we want to add new letter $a \notin \Sigma$ and find $\HJ(|\Sigma \cup \{a\}|, r, 1)$. Suppose for $S_d \subseteq \Sigma^d$ we have $k$-times $a$ and then the rest, that is some word $u \in \Sigma^{d-k}$.
		
		\begin{claim}
			$\forall r$ if $S_r$ is $r$-colored in a way that color depends only on length of the initial segment (the number of $a$'s) then $S_r$ contains monochromatic line.
		\end{claim}
	
		The claim is basically for the step function as was seen earlier.
		
		\begin{claim}
			$\forall r, d, l \ \exists N$ such that if $(\Sigma \cup \{a\})^N$ is $r$-colored then there exists $d$-dimensional subspace such that color of words with at most $l$ number of $a$'s followed by $u \in \Sigma^{d-l}$ depends only on number of $a$'s.
		\end{claim}
	
		\begin{proof}
			For $l = 0$ use $N = \HJ(|\Sigma|, r, d)$. Let $l = 1$ then set $n_1 = \HJ(|\Sigma|, r, d-1)$ and $n_2 = \HJ(|\Sigma|, r, n_1 + 1)$. Then $N = n_2$.
		\end{proof}
	\end{proof}
\end{topic}

\begin{topic}{Van der Warden from Hales Jewett}
	We may see a simple example \ref{comb} for which we would create a progression of numbers $(11, 12, 13, 21, 22, 23, 31, 32, 33)$ for which the progression are in a bijection to the example above. This is somehow the principle of doing it in general. We encode the combinatorial lines into a progressions.
\end{topic}